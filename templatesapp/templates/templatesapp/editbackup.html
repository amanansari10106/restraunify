<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    {{headz | safe}}
</head>

<body>
    <div>hello i am head <button onclick="saveTemplate()">Save</button> <a href="{% url 'previewWebsite' wid=wid%}"
            target="_blank"><button>Preview</button></a>
        <script>
            function saveTemplate() {
                console.log('hello');
                code = document.querySelector('#templateCode').innerHTML;

                url = "{% url 'saveTemplateView' %}";
                fetch(url, {
                    method: 'POST',
                    body: JSON.stringify({
                        code: code,
                        wid: '{{wid}}'
                    }),
                    headers: {
                        'Content-type': 'application/json; charset=UTF-8',
                        'X-CSRFToken': '{{ csrf_token }}'
                    }
                }).then(function (response) {
                    if (response.ok) {
                        alert('task done');
                        return response.json();
                    }
                    else {

                    }
                    return Promise.reject(response);
                }).then(function (data) {

                }).catch(function (error) {

                });
            }
        </script>
    </div>
    <div id="templateCode">

        {{code| safe}}

    </div>



    <!-- edit work -->

    <!-- Modal -->
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog"
        aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLongTitle">Change Image</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    ...
                    <ul class="nav nav-tabs" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="gallery-tab" data-toggle="tab" href="#gallery" role="tab"
                                aria-controls="gallery" aria-selected="true" onclick="loadGallery">Gallery</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="upload-image-tab" data-toggle="tab" href="#upload-image" role="tab"
                                aria-controls="upload-image" aria-selected="false">Profile</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="contact-tab" data-toggle="tab" href="#contact" role="tab"
                                aria-controls="contact" aria-selected="false">Contact</a>
                        </li>
                    </ul>
                    <!-- <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="gallery" role="tabpanel"
                            aria-labelledby="gallery-tab">

                            <img src="https://raw.githubusercontent.com/amanansari10106/amanansari10106.github.io/main/logo.png"
                                alt="">
                            <img src="https://raw.githubusercontent.com/amanansari10106/amanansari10106.github.io/main/logo.png"
                                alt="">
                            <img src="https://raw.githubusercontent.com/amanansari10106/amanansari10106.github.io/main/logo.png"
                                alt="">
                            <img src="https://raw.githubusercontent.com/amanansari10106/amanansari10106.github.io/main/logo.png"
                                alt="">
                            <img src="https://raw.githubusercontent.com/amanansari10106/amanansari10106.github.io/main/logo.png"
                                alt="">
                            <img src="https://raw.githubusercontent.com/amanansari10106/amanansari10106.github.io/main/logo.png"
                                alt="">
                        </div>
                        <div class="tab-pane fade" id="upload-image" role="tabpanel" aria-labelledby="upload-image-tab">
                            Upload Image
                            <input type="file" accept="image/*" onchange="loadFile(event)">
                            <img id="img-upload-preview" />
                            <button>Uplod image</button>
                            <script>
                                let loadFile = function (event) {
                                    let reader = new FileReader();
                                    reader.onload = function () {
                                        let output = document.getElementById('img-upload-preview');
                                        output.src = reader.result;
                                    };
                                    reader.readAsDataURL(event.target.files[0]);
                                };
                            </script>
                        </div>
                        <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">...</div>
                    </div> -->


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    </div>
    <style>
        #img-upload-preview {
            width: 50%;
        }
    </style>
    <script>
        function loadGallery(){
            
        }
        document.querySelectorAll("img").forEach(element => {
            element.addEventListener('click', () => {
                if (event.ctrlKey) {
                    text = "The CTRL key was pressed!";
                    alert(text);
                }
            })
        });

        document.querySelectorAll('.editableClass').forEach(element => {
            element.addEventListener('click', () => {
                if (event.ctrlKey) {

                    element.contentEditable = true;
                }
            })
        })
    </script>
</body>

</html>